import r,{useRef as t}from"react";import e from"form_to_object";function n(){return(n=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r}).apply(this,arguments)}const o=r=>console.error(r);export default function({onSubmit:a,onError:i=o,onChange:c,autoReset:l,children:u,...s}){const f=t();if(!a)throw new Error("onSubmit() callback is required");return r.createElement("form",n({onSubmit:async r=>{try{r.persist(),r.preventDefault(),f.current.disabled=!0,await a((t=r.target,"multipart/form-data"===(t.enctype||"").toLowerCase()?new FormData(t):e(t)||{})),l&&r.target.reset()}catch(r){i(r)}finally{if(!f||!f.current)return;f.current.disabled=!1}var t},onChange:r=>c?c(r.target):null},s),r.createElement("fieldset",{style:{padding:0,margin:0,border:"none"},ref:f},u))}

import r,{useRef as e}from"react";import t from"form_to_object";function n(){return(n=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r}).apply(this,arguments)}const o=r=>console.error(r),a=r=>"multipart/form-data"===(r.enctype||"").toLowerCase()?new FormData(r):t(r)||{};export default function({onSubmit:t,onError:i=o,onChange:c,autoReset:l,children:u,...s}){const f=e();if(!t)throw new Error("onSubmit() callback is required");return r.createElement("form",n({onSubmit:async r=>{try{r.persist(),r.preventDefault(),f.current.disabled=!0,await t(a(r.target)),l&&r.target.reset()}catch(r){i(r)}finally{if(!f||!f.current)return;f.current.disabled=!1}},onChange:r=>c?c(a(r.currentTarget)):null},s),r.createElement("fieldset",{style:{padding:0,margin:0,border:"none"},ref:f},u))}
